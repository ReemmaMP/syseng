<html>

<head>
    <!-- Bootstrap and jQuery -->
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" integrity="sha384-+ENW/yibaokMnme+vBLnHMphUYxHs34h9lpdbSLuAwGkOKFRl4C34WkjazBtb7eT"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="css/styles.css">

    <title>Spot Markets Tourist | Research</title>
</head>

<body>
    <!-- Navigation bar as per website delivery guidelines -->
    <div class="container" id="navbar-container">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false"
                        aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    <a class="navbar-brand" href="index.html">Spot Markets Tourist</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="requirements.html">Requirements</a></li>
                        <li class="active"><a href="research.html">Research</a></li>
                        <li><a href="hci.html">HCI</a></li>
                        <li><a href="design.html">Design</a></li>
                        <li><a href="testing.html">Testing</a></li>
                        <li><a href="evaluation.html">Evaluation</a></li>
                        <li><a href="management.html">Management</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <div class="container">
        <h2>Why did we choose Xamarin for the app?</h2>
        <div class="well">
            <p>
                Since the requirement was to create a cross-platform app, we had the choice of using either Xamarin or an HTML/JavaScript
                framework such as Apache Cordova, React or PhoneGap. There were a few factors that pushed us toward Xamarin:
                <ul>
                    <li>As this is a Microsoft-sponsored project, use of the Microsoft stack is encouraged (and preferred) by
                        our clients.</li>
                    <li>Last year's work on this project was done in C# and Xamarin so it made sense to use this technology again
                        in order to be able to re-use any code where possible.</li>
                    <li>Writing the app in C# allows us to build a rich, native application rather than one that relies on an
                        embedded web browser. This yields a UI that feels more native to the platform, complete with backend
                        code re-use, as opposed to a Cordova app that looks the same on all platforms even if that breaks
                        each given platform's design guidelines. We are still able to reuse backend (Model) code whilst customising
                        the interface where necessary for each taget platform.</li>
                    <li>The application uses lots of complex APIs like location services which can be more challenging and less
                        reliable in pure JavaScript. Xamarin promises 100% API access from within C#, so our code would even
                        be able to access, for example, Bluetooth Low Energy in the future if it were to be combined with
                        the work of another Spot Markets group.</li>
                </ul>
            </p>
        </div>

        <h2>Why did we choose Django for the backend?</h2>
        <div class="well">
            <p>
                One of our other main requirements is to create a web application that allows Kent County Council to add Points of Interest
                to the app. This also needs to tie in with a backend API so that the app itself doesn't need to have a copy
                of every POI, and updates are not needed to issue a new database of landmarks to users. In order to fulfill
                these requirements we need to create a cloud web service that would expose a data API to the app. Several
                frameworks and technologies such as Node.js, Ruby on Rails, PHP and ASP.Net Core exist to fulfill these purposes.
                We chose django for the following reasons:
                <ul>
                    <li>
                        Django allow us to define a PostgreSQL database entirely in code and access them using objects, whilst facilitating changes
                        in schema at a later date. This saves us from having to write SQL queries which can be time-consuming
                        security risks.
                    </li>
                    <li>
                        The Django Rest Framework can create JSON API endpoints in a scalable and neat way. It is designed to serve requests to thousands
                        of users, and is even used by Instagram in their backend.
                    </li>
                    <li>
                        It has a built in development server that makes stack traces easier to understand and does not require a separate web server;
                        for development purposes it can provide its own.
                    </li>
                    <li>
                        The language used is Python which is easy to read and learn.
                    </li>
                    <li>
                        The Django Template engine can provide the necessary backend for web forms, including Cross Site Request Forgery (CSRF) protection
                        out of the box. This will keep the system secure whilst also making it easy for us to take user input
                        and insert it into the database.
                    </li>
                    <li>
                        Django runs on Windows, Mac and Linux allowing us to develop and deploy on different platforms.
                    </li>
                </ul>
            </p>
        </div>

        <h2>Other APIs, Libraries &amp; Services Used</h2>
        <div class="well">
            <h4>PostgreSQL</h4>
            <p>
                PostgreSQL was our database of choice for the backend. This was motivated by the use of Django for the web framework, as
                the Django Object-Relation Mapper is optimised for databases like Postgres. By setting up a Postgres server
                we can use Django migrations to set up all the tables with data, thus eradicating the need to do any SQL
                queries beyond the initial setup. Postgres can also be hosted on anything so if scalability is required later
                it can be set up on a dedicated host or cluster and referenced by Django; it does not have to reside on the
                same machine as a flat file solution such as SQLite would.
            </p>
            <br>
            <h4>OpenWeatherMap</h4>
            <p>
                The OpenWeatherMap API is free to use at small scale, and keys can be upgraded at cost later if needed. As the weather data
                does not have to be real time (and can be synced every few minutes, for example) we are very unlikely to
                exceed the maximum number of OpenWeatherMap requests, as they are capped per second. If we do happen to hit
                this limit we can batch process weather data updates and artificially slow down the synchronisation so that
                the data is refreshed, for example, in batches of twenty POIs per second.
            </p>
            <p>
                The OpenWeatherMap API also provides textual explanations of the weather in each location and even provides an icon that
                can be displayed to the user to represent the weather conditions. This avoids having to convert numeric values
                (such as humidity, wind speed and temperature) into explanations of the weather for users ourselves, as this
                would require a level of meteorological understanding that far exceeds the boundaries of this project!
            </p>
            <br>
            <h4>Xamarin.Forms</h4>
            <p>
                Xamarin.Forms was chosen as our API to produce the application's User Interface. This is because we can define the interface
                for both Android and iOS using XAML which will run on both platforms. We then only need to configure colour
                schemes for each platform to make the app work across both iOS and Android.
            </p>
            <p>
                In addition, Xamarin.Forms provides Xamarin.Forms.Maps, a cross-platform mapping API that will use the platform's native
                map provider to show the user where they are. It will also allow us to drop pins and move the map around
                without having to write any platform specific code. The Maps APIs used are:
                <ul>
                    <li>
                        Android: Google Maps
                    </li>
                    <li>
                        iOS: Apple Maps
                    </li>
                    <li>
                        Universal Windows Platform (for Windows Phone 10, should this platform be addressed in the future): Bing Maps
                    </li>
                </ul>
            </p>
            <br>
            <h4>Google Maps</h4>
            <p>
                Google Maps is used by default on Android by Xamarin.Forms.Maps. However, we have also chosen to use it for the web portal
                offered to Kent Council. This is because Google's API is free to use in small, noncommercial deployments
                such as ours. It also provides the necessary functionality to auto-complete addresses and grab coordinates
                (longitude and latitude) which are necessary to drop pins using Xamarin.Forms.Maps.
            </p>
            <br>
            <h4>Visual Studio Team Services (VSTS)</h4>
            <p>
                As the Visual Studio IDE is optimised for Xamarin from VS2015, and it is natively supports VSTS, it makes sense to use VSTS
                as our code host. We can use Git for Version Control which is the current industry standard whilst also matching
                up our code to assigned work items. It also supports direct integration and testing with Xamarin Test Cloud,
                should we need to make use of this feature. Furthermore, all previous work has been provided to us on VSTS
                so it makes sense to keep everything in one place.
            </p>
            <br>
            <h4>Django Dotenv</h4>
            <p>
                This is a very small library used with Django which allows us to set environment variables in a file called .env. This way,
                we can either set development environment variables on the command line, and there are no passwords in source
                control. It also makes it easy to move the Django host to a new server, or change databases.
            </p>
        </div>

        <h2>How to build, setup and configure the platform?</h2>
        <div class="well">
            <p>
                <ul>
                    <li>All code we write will be in Microsoft Visual Studio, so this will need to be installed.</li>
                    <li>Code is hosted on Visual Studio Team Services, so obtaining the code, should access be granted, can be
                        done using either Git or the Team Services pane in Visual Studio itself.</li>
                    <li>Once the code is cloned, there will be a single solution (.sln) file which contains all the code for
                        our main application. There may also be other code in the repository if we carry out any further
                        experiments and API tests, but the main repo will be clearly labelled.</li>
                    <li>When opening the project for the first time, all the required NuGet packages will be restored to the
                        project.
                    </li>
                    <li>Choose the platform you want to build for from the dropdown list in Visual Studio. If you are building
                        for iOS you should have a Mac available with Xcode and the Xamarin agent installed to handle builds.
                    </li>
                </ul>
            </p>
        </div>

        <!--<h2>What are the different layers?</h2>
        <div class="jumbotron">
            <p>
                Explain the following: The layers identified (e.g., hardware, OS, library/framework, application) and how they
            communicate with each other.  The public APIs that your platform and/or OS make available to allow the application
            to be written.  Identification of what has been adapted from the open source community and what is to be
            newly developed or configured.
            </p>
            <p>
                As we are continuing with and building upon previous work, we were provided with an architectural diagram explaining which
                components connect to which others. I have annotated this to show which components we should be concerned
                with in this project.<br>
                <img src="original/static/img/SpotMarketsArchitectureDiagram.jpg" style="width:100%;height:100%"><br>

                <img class="img img-responsive" src="original/static/img/SpotMarketsArchitectureDiagram.jpg"><br> The following
                technologies are in use:
                <ul>
                    <li>Recommendation Engine (not being developed by us, but underpins the machine learning aspects of the project):
                        Azure and AzureML.</li>
                    <li>Database: Azure DocumentDB accessed via the MongoDB API.</li>
                    <li>API: JSON is used to communicate between the client and the server.</li>
                    <li>Flask: The backend server is written in Flask / Python. This is being deployed to a Linux virtual machine
                        hosted on Azure Compute.</li>
                    <li>Bing Maps API: We plan to use Bing Maps to show the user where they are and to overlay the Points of
                        Interest onto a map.</li>
                    <li>OpenWeatherMap API: We are using OpenWeatherMap (as it is free up to one call per second) to source local
                        weather data into the app.</li>
                </ul>
            </p>
        </div>-->
    </div>
</div>

</div>
</body>

</html>
